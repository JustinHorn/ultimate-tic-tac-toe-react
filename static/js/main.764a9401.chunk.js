(this["webpackJsonpultimate-tic-tac-toe"]=this["webpackJsonpultimate-tic-tac-toe"]||[]).push([[0],{104:function(e,t,a){"use strict";a.d(t,"a",(function(){return f}));var n=a(0),r=a.n(n),i="#fc7341",c="#2db2e2",l="#ffccb5",o="#dbf5ff",s="#F0F8FF",u="#e2ffec";function f(e){var t={display:"inline-block"};return e.value&&(t.color="X"===e.value?i:c),e.winner&&("X"===e.winner?t.background=l:"O"===e.winner?t.background=o:t.background=s),e.clickable&&(t.background=u),r.a.createElement("button",{className:"square",style:t,onClick:function(){e.clickable&&e.onClick()}},e.value)}},155:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return b}));var n=a(36),r=a(18),i=a(19),c=a(21),l=a(22),o=a(23),s=a(0),u=a.n(s),f=a(156),h=a(83),d=a(53),m=a(51),v=a(166),p=a(168),k={squares:Array(9).fill(Array(9).fill(null)),localWinners:Array(9).fill(null),activeFields:Array(9).fill(!0),xIsNext:!0,winner:null,size:3},b=function(t){Object(l.a)(s,t);var a=Object(o.a)(s);function s(t){var i;return Object(r.a)(this,s),(i=a.call(this,t)).state=Object(n.a)({},k),i.workerApi=void 0,i.workers=[0],i.getAIMove=function(e,t){i.removeWorkers(),i.getWorker();var a=function(t,a){if(i.noUpdateOccured(a)){if(!t)throw Error("move is undefined: "+t);e.handleClick(t)}},n=i.getIdWorkerId();if("rAI"===t)i.workerApi.getRandomMove(e.state).then((function(e){a(e,n)}));else if("AI"===t){var r=e.state.xIsNext?i.state.players.aiP1T:i.state.players.aiP2T;r*=1e3,i.workerApi.getMonteCarloMove(e.state,r).then((function(e){a(e,n)}))}},i.getIdWorkerId=function(){var e=i.workers[0]+1;return i.workers.push(e),i.workers[0]=e+1,e},i.noUpdateOccured=function(e){return-1!==i.workers.indexOf(e)},i.removeWorkers=function(){i.workers=[i.workers[0]]},i.getWorker=function(){if(!i.workerApi){var t=new Worker(e,{name:"webworker",type:void 0});i.workerApi=Object(v.a)(t)}},i.getPlayer=function(){return i.players},i.setPlayer=function(e){i.setState({players:Object(n.a)({},e)}),i.props.onPlayerChange&&i.props.onPlayerChange(e)},i.handleClick=function(e){if(!i.state.winner){var t=d.b.getNextData(i.state,e);i.setState((function(e,a){return Object(n.a)({},t)}))}},i.renderBoard=function(e){return u.a.createElement(f.a,{key:e,size:3,squares:i.state.squares[e],winner:i.state.localWinners[e],clickable:i.state.activeFields[e],onClick:function(t){return i.handleClick(d.b.getMove(t,e))}})},i.handleAI=function(){var e=Object(c.a)(i).state;d.b.getMoves(e).length>0&&(e.xIsNext&&"human"!==e.players.p1?i.getAIMove(Object(c.a)(i),e.players.p1):e.xIsNext||"human"===e.players.p2||i.getAIMove(Object(c.a)(i),e.players.p2))},i.timeOver=function(e){"X"===e?i.setState({winner:"O"}):i.setState({winner:"X"})},t.players?i.state.players=t.players:i.state.players=m.c,i}return Object(i.a)(s,[{key:"render",value:function(){this.handleAI();var e=this.state;return u.a.createElement("div",null,u.a.createElement("div",{className:"Game-Settings"},u.a.createElement(m.a,{callBackPlayer:this.setPlayer,players:e.players})),u.a.createElement("div",{className:"game-container"},u.a.createElement("div",{className:"game-row"},u.a.createElement(y,{render:this.renderBoard}))),u.a.createElement("br",null),u.a.createElement("div",{className:"game-container"},this.props.renderInfo&&u.a.createElement(p.a,{clock:this.props.clock,timeOver:this.timeOver,time:this.props.time,state:e})))}}]),s}(s.Component);function y(e){return Object(h.a)("game",3,e.render)}}).call(this,a(293))},156:function(e,t,a){"use strict";a.d(t,"a",(function(){return h}));var n=a(18),r=a(19),i=a(21),c=a(22),l=a(23),o=a(0),s=a.n(o),u=a(104),f=a(83),h=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).renderSquare=r.renderSquare.bind(Object(i.a)(r)),r}return Object(r.a)(a,[{key:"renderSquare",value:function(e){var t=this;return s.a.createElement(u.a,{key:e,value:this.props.squares[e],winner:this.props.winner,clickable:!this.props.squares[e]&&this.props.clickable,onClick:function(){return t.props.onClick(e)}})}},{key:"render",value:function(){return Object(f.a)("board",this.props.size,this.renderSquare)}}]),a}(s.a.Component)},168:function(e,t,a){"use strict";a.d(t,"a",(function(){return f}));var n=a(0),r=a.n(n),i=a(18),c=a(19),l=a(22),o=a(23),s=function(e){Object(l.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={elapsed:0},n.tick=function(){n.setState((function(e,t){var a=new Date-n.lastTick,r=e.elapsed+a;return t.seconds-r/1e3<.15&&t.timeOverCallback(t.player),{elapsed:r}})),n.lastTick=new Date},n.lastTick=null,n}return Object(c.a)(a,[{key:"componentWillUnmount",value:function(){clearInterval(this.timer)}},{key:"pause",value:function(){clearInterval(this.timer),this.timer=null,this.lastTick=null}},{key:"resume",value:function(){this.timer=setInterval(this.tick,1e3),this.lastTick=new Date}},{key:"render",value:function(){var e=this.props.seconds-Math.floor(this.state.elapsed/1e3),t=Math.floor(e/60),a=e%60;return this.props.isPaused?this.pause():this.timer||this.resume(),r.a.createElement("p",{className:"countdown"},("0"+t).slice(-2),":",("0"+a).slice(-2))}}]),a}(r.a.Component),u=a(53);function f(e){return r.a.createElement("div",{className:"game-info"},r.a.createElement("div",{id:"status"},function(e){var t;e.winner?(t=e.winner+" wins!",null===u.b.calc3x3(e.localWinners)&&(t="Time over! "+t)):-1===e.localWinners.indexOf(null)?(t="Draw! Everybody wins!! :D",console.log(e)):t="Next player: "+(e.xIsNext?"X":"O");return t}(e.state)),e.clock&&function(e,t,a){var n=!a.xIsNext||Boolean(a.winner),i=a.xIsNext||Boolean(a.winner);return r.a.createElement("div",null,"[TIME] X:"," ",r.a.createElement(s,{key:1,player:"X",seconds:60*t,isPaused:n,timeOverCallback:e}),", O:"," ",r.a.createElement(s,{key:2,player:"O",seconds:60*t,isPaused:i,timeOverCallback:e}))}(e.timeOverCallback,e.time,e.state))}},181:function(e,t,a){e.exports=a(311)},186:function(e,t,a){},293:function(e,t,a){e.exports=a.p+"static/js/webworker.9a88780c.chunk.worker.js"},311:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(40),c=a.n(i),l=(a(186),a(18)),o=a(19),s=a(21),u=a(22),f=a(23),h=a(33),d=a(312),m=a(319),v=a(169),p=function(e){Object(u.a)(a,e);var t=Object(f.a)(a);function a(e){var n;Object(l.a)(this,a);var r=(n=t.call(this,e)).props.defaultValues;return n.state={boardSize:3,clock:r.clock,time:r.time},n.handleChange=n.handleChange.bind(Object(s.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(s.a)(n)),n}return Object(o.a)(a,[{key:"handleChange",value:function(e){var t=e.target;this.handleTarget(t)}},{key:"handleTarget",value:function(e){var t="checkbox"===e.type?e.checked:e.value,a=e.name;"clock"===a&&console.log("Clock: "+e.value),this.setState(Object(h.a)({},a,t))}},{key:"handleSubmit",value:function(e){this.props.submitCallback(this.state.clock,this.state.time),e.preventDefault()}},{key:"render",value:function(){var e=this;return r.a.createElement("form",null,r.a.createElement(d.a,{size:"mini",onClick:this.handleSubmit}," ","new Game"),r.a.createElement("label",{className:"settings-label"},r.a.createElement(m.a,{label:"Clock",name:"clock",type:"checkbox",onChange:function(t,a){return e.handleTarget(a)}})),this.state.clock&&r.a.createElement("label",{className:"settings-label"},r.a.createElement(v.a,{label:"Time (min)",size:"mini",name:"time",type:"number",max:"100",min:"1",value:this.state.time,onChange:this.handleChange})))}}]),a}(r.a.Component),k=a(155),b=a(51),y=!1,g=10,w=function(e){Object(u.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).players=b.b,n.onPlayerChange=function(e){n.players=e},n.state={clock:y,time:g,matchID:0},n.newGame=n.newGame.bind(Object(s.a)(n)),n}return Object(o.a)(a,[{key:"newGame",value:function(e,t){this.setState((function(a,n){return{clock:e,time:t,matchID:a.matchID+1}}))}},{key:"updatePlayer",value:function(e){}},{key:"render",value:function(){return r.a.createElement("div",{className:"app"},r.a.createElement("div",{className:"container mt-2"},r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement(p,{defaultValues:this.state,submitCallback:this.newGame}),r.a.createElement("br",null)),r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement(k.a,{key:this.state.matchID,clock:this.state.clock,time:this.state.time,players:this.players,onPlayerChange:this.onPlayerChange,renderInfo:!0}))))}}]),a}(r.a.Component),O=(a(310),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function x(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}c.a.render(r.a.createElement(w,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/ultimate-tic-tac-toe-react",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/ultimate-tic-tac-toe-react","/service-worker.js");O?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):x(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):x(t,e)}))}}()},51:function(e,t,a){"use strict";a.d(t,"b",(function(){return h})),a.d(t,"c",(function(){return d}));var n=a(36),r=a(18),i=a(19),c=a(22),l=a(23),o=a(0),s=a.n(o),u=a(171),f=a(169),h={p1:"AI",p2:"AI",aiP1T:1,aiP2T:1},d={p1:"human",p2:"human",aiP1T:1,aiP2T:1},m=[{key:"h",value:"human",text:"human"},{key:"rAI",value:"rAI",text:"random AI"},{key:"a",value:"AI",text:"AI"}],v=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(r.a)(this,a);for(var i=arguments.length,c=new Array(i),l=0;l<i;l++)c[l]=arguments[l];return(e=t.call.apply(t,[this].concat(c))).state={players:e.props.players,callBackPlayer:e.props.callBackPlayer},e.handlePlayers=function(t){var a=t.target;e.handlePlayerTarget(a)},e.handlePlayerTarget=function(t,a){var r="checkbox"===a.type?a.checked:a.value,i=Object(n.a)({},e.state.players);i[t]=r,e.setState({players:i}),e.state.callBackPlayer&&e.state.callBackPlayer(i)},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return s.a.createElement("div",null," ",s.a.createElement(u.a,{inline:!0,options:m,name:"p1",onChange:function(t,a){return e.handlePlayerTarget("p1",a)},defaultValue:this.state.players.p1})," ","vs."," ",s.a.createElement(u.a,{inline:!0,name:"p2",options:m,defaultValue:this.state.players.p2,onChange:function(t,a){return e.handlePlayerTarget("p2",a)}}),"AI"===this.state.players.p1&&s.a.createElement("label",{className:"settings-label"},s.a.createElement(f.a,{label:"AI player1 time (s)",size:"mini",name:"aiP1T",type:"number",min:"0.001",max:"9",value:this.state.players.aiP1T,onChange:function(t,a){return e.handlePlayerTarget("aiP1T",a)}})),"AI"===this.state.players.p2&&s.a.createElement("label",{className:"settings-label"},s.a.createElement(f.a,{label:"AI player2 time (s)",size:"mini",name:"aiP2T",min:"0.001",type:"number",max:"9",value:this.state.players.aiP2T,onChange:function(t,a){return e.handlePlayerTarget("aiP2T",a)}})))}}]),a}(o.Component);t.a=v},53:function(e,t,a){"use strict";a.d(t,"b",(function(){return c})),a.d(t,"a",(function(){return l}));var n=a(18),r=a(19);a(36);function i(e){var t,a=c.getMoves(e);return(t=a)[Math.floor(Math.random()*t.length)]}a(104);var c=function(){function e(){Object(n.a)(this,e)}return Object(r.a)(e,null,[{key:"getMoves",value:function(t){var a=[];return t.localWinners.forEach((function(n,r){null===n&&t.activeFields[r]&&t.squares[r].forEach((function(t,n){null===t&&a.push(e.getMove(n,r))}))})),a}},{key:"getNextData",value:function(t,a){if(void 0===t.xIsNext)throw Error("Data xIsNext is undefined");var n=t.squares.map((function(e){return e.slice()}));if(!a||n[a.outer_idx][a.inner_idx])throw console.log("hello"),Error("field already taken");if(!t.activeFields[a.outer_idx])throw Error("field inactive");n[a.outer_idx][a.inner_idx]=t.xIsNext?"X":"O";var r=n.map((function(t){return e.calc3x3(t)})),i=e.calc3x3(r),c=t.activeFields.slice();return r[a.inner_idx]?r.forEach((function(e,t){return c[t]=!e})):c=c.map((function(e,t){return t===a.inner_idx})),i&&(c=Array(9).fill(!1)),{winner:i,squares:n,localWinners:r,activeFields:c,xIsNext:!t.xIsNext}}},{key:"dataIsOver",value:function(t){return 0===e.getMoves(t).length}},{key:"propagate",value:function(t){var a=t.data;if(t.hasChildren())throw Error("Tree shouldn't have children");for(var n=e.calc3x3(a.localWinners);!e.dataIsOver(a);)n=(a=e.getNextData(a,i(a))).winner;return n?n===(t.data.xIsNext?"O":"X")?l.VICTORY:l.DEFEAT:l.DRAW}}]),e}();c.getMove=function(e,t){return{inner_idx:e,outer_idx:t}},c.calc3x3=function(e){for(var t=["XXX","OOO"],a=[(e=e.map((function(e){return e||" "})))[0]+e[1]+e[2],e[3]+e[4]+e[5],e[6]+e[7]+e[8],e[0]+e[3]+e[6],e[1]+e[4]+e[7],e[2]+e[5]+e[8],e[0]+e[4]+e[8],e[2]+e[4]+e[6]],n=0;n<a.length;n++)if(a[n]===t[0]||a[n]===t[1])return a[n].charAt(0);return null},c.calcWinner=function(e){return c.calc3x3(e.map((function(e){return c.calc3x3(e)})))};var l={VICTORY:1,DEFEAT:-1,DRAW:0}},83:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(0),r=a.n(n);function i(e,t,a){for(var n=[],i=0;i<t;i++){for(var c=[],l=0;l<t;l++)c.push(a(i*t+l));n.push(r.a.createElement("div",{className:e+"-row",key:i},c))}return r.a.createElement("div",{className:e},n)}}},[[181,1,2]]]);
//# sourceMappingURL=main.764a9401.chunk.js.map